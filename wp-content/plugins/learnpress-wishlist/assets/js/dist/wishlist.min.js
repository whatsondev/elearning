(()=>{!function(t){"use strict";let s=null,e=function(){const s=t(this),e=s.attr("data-id"),a=s.attr("data-nonce"),o=s.data("text");s.hasClass("ajaxload_wishlist")||(s.addClass("ajaxload_wishlist").prop("disabled",!0),o&&s.html(o),t.ajax({url:window.location.href,type:"post",dataType:"html",data:{"lp-ajax":"toggle_course_wishlist",course_id:e,nonce:a},success(s){s=function(t){if("string"!=typeof t)return t;const s=String.raw({raw:t}).match(/<-- LP_AJAX_START -->(.*)<-- LP_AJAX_END -->/s);try{t=s?JSON.parse(s[1].replace(/(?:\r\n|\r|\n)/g,"")):JSON.parse(t)}catch(s){t={}}return t}(s);const e=t(".learn-press-course-wishlist-button-"+s.course_id),a=e.closest('[data-context="tab-wishlist"]');a.length?a.fadeOut((function(){const t=a.siblings(),s=a.closest("#learn-press-profile-tab-course-wishlist");a.remove(),0==t.length&&s.removeClass("has-courses")})):e.removeClass("ajaxload_wishlist").toggleClass("on","on"==s.state).prop("title",s.title).html(s.button_text),e.prop("disabled",!1)}}))};t(document).on("click",".course-wishlist",(function(){s&&clearTimeout(s),s=setTimeout(t.proxy(e,this),50)}))}(jQuery);const t=new Set;document.addEventListener("click",(s=>{s.target.classList.contains("lp-item-wishlist")&&(async s=>{const e=s.dataset.itemId;if(e&&!t.has(e)){t.add(e),s.style.opacity="0.5";try{const t=await fetch(`${lpData.lp_rest_url}learnpress/v1/wishlist/add_or_remove`,{method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":lpData.nonce},body:JSON.stringify({id:e})}),{status:a,message:o,data:i}=await t.json();if("success"!==a)throw new Error(o);s.classList.toggle("active")}catch(t){alert(t.message)}finally{t.delete(e),s.style.opacity="1"}}})(s.target)}))})();